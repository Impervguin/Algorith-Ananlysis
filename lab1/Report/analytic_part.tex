\chapter{Аналитическая часть}
\section{Расстояние Левенштейна}
\textbf{Расстояние Левенштейна} – метрика, измеряющая редакторское расстояние между двумя последовательностями символов. Расстояние Левенштейна - минимальное количество операций вставки, замены и удаления символов, необходимых для преобразования одной последовательности в другую. Стоимости каждого вида операций могут быть различны, однако в данной работе примем их всех равными единице, то есть будем считать количество операций, требуемых для преобразования.

\subsection{Рекурсивная формула расстояния Левенштейна}

Пусть существует две последовательности символов $S_1$ и $S_2$ длины N и M соответственно. Введём функцию $D(i, j)$, равную расстоянию Левенштейна между подстроками $S_1[1...i]$ и $S_2[1...j]$.

Тогда расстояние Левенштейна для двух строк может быть выражено следующей рекуррентной формулой:

\begin{equation}
	\label{eq:D}
	D(i, j) = 
	\begin{cases}
		0, &\text{i = 0 и j = 0},\\
		i, &\text{i > 0 и j = 0},\\
		j, &\text{i = 0 и j > 0},\\
		min \begin{cases}
			D(i, j - 1) + 1, &\text{Вставка}\\
			D(i - 1, j) + 1, &\text{Удаление}\\
			D(i - 1, j - 1) + f_e(S_1[i], S_2[j]), &\text{Замена}\\
		\end{cases} &\text{i > 0 и j > 0},\\
	\end{cases}
\end{equation}
где функция сравнения строк описывается как:
\begin{equation}
	\label{eq:f_e}
	f_e(a1, a2) = 
	\begin{cases}
		0, &\text{a1 == a2},\\
		1, &\text{a1 != a2}.\\
	\end{cases}
\end{equation}
Функция \ref{eq:f_e} просчитывает минимальное расстояние Левенштейна к текущему моменту(индексу в первой строке), пытаясь привести первую строку к виду второй с конца. В рекурсивной части функции первая строка символизирует вставку символа в первую строку из второй, вторая строка функции символизирует удаление символа из первой, а последняя замену символа первой на вторую, при этом если символы уже равны, то замену проводить не нужно и операция стоит 0.

\subsection{Расстояние Левенштейна с кешированием}
Рекурсивная форма может оказаться малоэффективной при больших значениях N и M, так как в ней могут постоянно пересчитываться значения $D(i, j)$ для одних и тех же аргументов. Для устранения потенциального недостатка используем итерационный алгоритм, который сохраняет промежуточные значения в виде матрицы размерности $(N+1)x(M+1)$.

Значения в ячейке [i, j] описанной выше матрицы содержат значение $D(i, j)$, то есть расстояние Левенштейна между подстроками $S_1[1...i]$ и $S_2[1...j]$.
При этом нулевая строка и нулевой столбец матрицы заполняются слева-направо и сверху-вниз от 0 до соответствующей размерности,  так как приведение пустой строки к любой строке длины, скажем, i требует i операций вставки.

Далее алгоритм построчно заполняет матрицу по формуле (\ref{eq:D}), при этом вместо просчёта предыдущих значений D используются значения из матрицы в соответствующих ячейках.

Данный алгоритм может работать эффективнее по времени, однако за счёт хранения дополнительной матрицы может тратить больше памяти. Можно оптимизировать это, если на каждой итерации хранить только текущую строку матрицы и предыдущую, так как остальные не нужны для просчёта.

\section{Расстояние Дамерау-Левенштейна}

\textbf{Расстояние Дамерау-Левенштейна} – метрика, расстояние между двумя последовательностями символов, определяемая минимальным количеством операций вставки, замены, удаления и транспозиции символов, необходимых для преобразования одной последовательности в другую. Под транспозицией понимается перестановка двух соседних символов. От расстояния Левенштейна отличается тем, что вводится операция транспозиции, которая может существенно уменьшить значение расстояния.

\subsection{Рекурсивная формула расстояния Дамерау-Левенштейна}

Введём также как и для расстояния Левенштейна функцию $D(i, j)$, при этом с учётом транспозиции формула будет выглядеть так:

\begin{equation}
	\label{eq:Dd}
	D(i, j) = 
	\begin{cases}
		0, &\text{i = 0 и j = 0},\\
		i, &\text{i > 0 и j = 0},\\
		j, &\text{i = 0 и j > 0},\\
		min \begin{cases}
			D(i, j - 1) + 1, &\text{Вставка}\\
			D(i - 1, j) + 1, &\text{Удаление}\\
			D(i - 1, j - 1) + f_e(S_1[i], S_2[j]), &\text{Замена}\\
			D(i - 2, j - 2) + 1, &\text{Транспозиция}
		\end{cases} & \begin{aligned}
		&i > 1,  j > 1, \\ 
		&S_1[i] == S_2[j - 1], \\
		&S_1[i - 1] == S_2[j],\\
		\end{aligned} \\
		min \begin{cases}
			D(i, j - 1) + 1, &\text{Вставка}\\
			D(i - 1, j) + 1, &\text{Удаление}\\
			D(i - 1, j - 1) + f_e(S_1[i], S_2[j]), &\text{Замена}\\
		\end{cases} &\text{иначе.}\\
	\end{cases}
\end{equation}

Фактическое отличие от алгоритма расстояния Левенштейна в том, что при j > 1 и i > 1, а также при условии что соседние символы в строках равны "накрест", может быть проведена операция транспозиции, которая может сократить расстояние.

\subsection{Расстояние Дамерау-Левенштейна с кешированием}
Также как и в случае расстояния Левенштейна, рекурсивный алгоритм может быть малоэффективным, поэтому имеет место быть итерационный алгоритм с кешированием, используя матрицу, либо текущую и последние две строки матрицы. Данный алгоритм аналогичен алгоритму поиска расстояния Левенштейна, за исключением того, что при равенстве накрест двух соседних символов строк и значению i>1 и j>1 при расчёте очередной ячейки нужно проверить ещё и вариант с транспозицией.


\section*{Вывод}
В результате аналитического раздела были рассмотрены алгоритмы поиска расстояния Левенштейна и Дамерау-Левенштейна, а также их рекурсивные формулы, итерационные алгоритмы с кешированием матрицами и отдельными строками матриц.

\clearpage
